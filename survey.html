<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>I-sland Party 신청서</title>
    <link rel="stylesheet" href="survey.css">
</head>
<body>
    <div class="survey-container">
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        
        <div class="step-counter">
            <span id="currentStep">1</span> / 6
        </div>

        <!-- 단계 1: 성함 -->
        <div class="survey-step active" id="step1">
            <h2>성함을 입력해주세요</h2>
            <div class="input-container">
                <input type="text" id="userName" placeholder="홍길동">
                <button class="next-btn" id="nameNext">다음</button>
            </div>
        </div>

        <!-- 단계 2: 성별 -->
        <div class="survey-step" id="step2">
            <h2>성별을 선택해주세요</h2>
            <div class="options-container">
                <button class="option-btn" data-value="남성">남성</button>
                <button class="option-btn" data-value="여성">여성</button>
            </div>
        </div>

        <!-- 단계 3: 년생 -->
        <div class="survey-step" id="step3">
            <h2>태어난 년도를 입력해주세요</h2>
            <div class="input-container">
                <input type="number" id="birthYear" placeholder="예: 1995" min="1980" max="2010">
                <div class="button-container">
                    <button class="back-btn" id="yearBack">이전</button>
                    <button class="next-btn" id="yearNext">다음</button>
                </div>
            </div>
        </div>

        <!-- 단계 4: 연락처 -->
        <div class="survey-step" id="step4">
            <h2>연락처를 입력해주세요</h2>
            <div class="input-container">
                <input type="tel" id="phoneNumber" placeholder="010-1234-5678">
                <div class="button-container">
                    <button class="back-btn" id="phoneBack">이전</button>
                    <button class="next-btn" id="phoneNext">다음</button>
                </div>
            </div>
        </div>

        <!-- 단계 5: MBTI -->
        <div class="survey-step" id="step5">
            <h2>MBTI를 선택해주세요</h2>
            <div class="mbti-container">
                <div class="mbti-group">
                    <h3>분석가형 (NT)</h3>
                    <div class="mbti-options">
                        <button class="mbti-btn" data-value="INTJ">INTJ - 건축가</button>
                        <button class="mbti-btn" data-value="INTP">INTP - 논리술사</button>
                        <button class="mbti-btn" data-value="ENTJ">ENTJ - 통솔자</button>
                        <button class="mbti-btn" data-value="ENTP">ENTP - 변론가</button>
                    </div>
                </div>
                
                <div class="mbti-group">
                    <h3>외교관형 (NF)</h3>
                    <div class="mbti-options">
                        <button class="mbti-btn" data-value="INFJ">INFJ - 옹호자</button>
                        <button class="mbti-btn" data-value="INFP">INFP - 중재자</button>
                        <button class="mbti-btn" data-value="ENFJ">ENFJ - 선도자</button>
                        <button class="mbti-btn" data-value="ENFP">ENFP - 활동가</button>
                    </div>
                </div>
                
                <div class="mbti-group">
                    <h3>관리자형 (SJ)</h3>
                    <div class="mbti-options">
                        <button class="mbti-btn" data-value="ISTJ">ISTJ - 현실주의자</button>
                        <button class="mbti-btn" data-value="ISFJ">ISFJ - 수호자</button>
                        <button class="mbti-btn" data-value="ESTJ">ESTJ - 경영자</button>
                        <button class="mbti-btn" data-value="ESFJ">ESFJ - 집정관</button>
                    </div>
                </div>
                
                <div class="mbti-group">
                    <h3>탐험가형 (SP)</h3>
                    <div class="mbti-options">
                        <button class="mbti-btn" data-value="ISTP">ISTP - 만능재주꾼</button>
                        <button class="mbti-btn" data-value="ISFP">ISFP - 모험가</button>
                        <button class="mbti-btn" data-value="ESTP">ESTP - 사업가</button>
                        <button class="mbti-btn" data-value="ESFP">ESFP - 연예인</button>
                    </div>
                </div>
                
                <div class="button-container" id="mbtiButtons" style="display: none;">
                    <button class="back-btn" id="mbtiBack">이전</button>
                    <button class="next-btn" id="mbtiNext">다음</button>
                </div>
            </div>
        </div>

        <!-- 단계 6: 인스타 아이디 -->
        <div class="survey-step" id="step6">
            <h2>인스타그램 아이디를 입력해주세요</h2>
            <div class="input-container">
                <span class="instagram-prefix">@</span>
                <input type="text" id="instagram" placeholder="instagram_id">
                <div class="button-container">
                    <button class="back-btn" id="instaBack">이전</button>
                    <button class="next-btn" id="instaNext">완료</button>
                </div>
            </div>
        </div>

        <!-- 완료 단계 -->
        <div class="survey-step" id="stepComplete">
            <div class="completion-message">
                <h2>✅ 신청 완료!</h2>
                <p>신청해주셔서 감사합니다.<br>
                제출해주신 정보 하루안에 검토 후 연락드리겠습니다.<br>
                참가시 하루전에 오픈채팅방에 초대됩니다.<br>
                <strong>I-sland Party 💕</strong></p>
            </div>
            <button class="home-btn" onclick="window.location.href='index.html'">홈으로 돌아가기</button>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js';
        import { getFirestore, collection, addDoc, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js';
        import { getStorage, ref, uploadBytes, getDownloadURL } from 'https://www.gstatic.com/firebasejs/10.12.0/firebase-storage.js';

        // Firebase 설정
        const firebaseConfig = {
            apiKey: "AIzaSyDrp3OB-Po5KHca3pDVAxZOYv4lBl5gHdo",
            authDomain: "island-party-survey.firebaseapp.com",
            projectId: "island-party-survey",
            storageBucket: "island-party-survey.firebasestorage.app",
            messagingSenderId: "186364772506",
            appId: "1:186364772506:web:570f9a063828d83e301f23",
            measurementId: "G-MK6XKC46X7"
        };

        // Firebase 초기화
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const storage = getStorage(app);

        // 전역 변수로 설정하여 survey.js에서 사용 가능하도록
        window.firebaseDB = db;
        window.firebaseStorage = storage;
        window.firebaseAddDoc = addDoc;
        window.firebaseCollection = collection;
        window.firebaseServerTimestamp = serverTimestamp;
        window.firebaseRef = ref;
        window.firebaseUploadBytes = uploadBytes;
        window.firebaseGetDownloadURL = getDownloadURL;
    </script>
    <script src="survey.js"></script>
</body>
</html>
